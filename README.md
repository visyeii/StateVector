# StateVector

## Intention
Classes published under the name __StateVector__ were created to simplify and aggregate state transition related definitions.

## Definition

```csharp:Form1.cs
using VE = VectorEvent;//using alias directive

StateVector m_stateVector;

private void Form1_Load(object sender, EventArgs e)
{
    VE[] list = {
        //old state (head)          new state(tail)             function
        new VE("init",              VE.TailOr("a", "b", "c"),   InitState, () => { SetLog("!"); }),
        new VE("a",                 "b",                        () => { SetLog("a->b"); }),
        new VE("b",                 "a",                        () => { SetLog("b->a"); }),
        new VE("a",                 "a",                        () => { SetLog("a->a"); }),
        new VE("b",                 "b",                        () => { SetLog("b->b"); }),
        new VE(VE.HeadOr("a", "b"), "c",                        () => { SetLog("a|b->c"); }),
        new VE("c",                 VE.TailOr("a", "b"),        () => { SetLog("c->a|b"); })
    };

    m_stateVector = new StateVector("init", list);//(start_state, VectorEvent[])
}
```

## Behavior
When the value of m_stateVector has changed from the __previous state(head)__ to the __new state(tail)__ (matched)
__Call the function__.

## How to update the state
Call __Refresh__ and give the argument a __new state (tail)__.
```csharp:Form1.cs
private void button1_Click(object sender, EventArgs e)
{
    m_stateVector.Refresh("a");//new state(tail) 
}
        
private void button2_Click(object sender, EventArgs e)
{
    m_stateVector.Refresh("b");//new state(tail) 
}

private void button3_Click(object sender, EventArgs e)
{
    m_stateVector.Refresh("c");//new state(tail) 
}
```

## State transition diagram (Generated by PlantUML)
![](https://raw.githubusercontent.com/visyeii/StateVector/Readme_Edit/out/SampleState/SampleState.png)

### PlantUML definition
```:SampleState.pu
@startuml
[*] --> Form : Form Load

state Form {
    init --> a : start !
    init  --> b : start !
    init --> c : start !
    a --> b : a->b
    b --> a : b->a
    a --> a : a->a 
    b --> b : b->b
    a --> c : a|b->c
    b --> c : a|b->c
    c --> a : c->a|b
    c --> b : c->a|b
}

Form --> [*] : Form Close
@enduml
```
